<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração de Equipamentos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Custom font for a clean look */
        body {
            font-family: 'Inter', sans-serif;
            /* Modern gradient background */
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; /* Ensure full viewport height */
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Glassmorphism effect for the main container */
        .glass-effect {
            background: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
            backdrop-filter: blur(20px); /* Blur effect */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
        }
        
        /* Hover effect for cards/labels */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth transition */
        }
        
        .card-hover:hover {
            transform: translateY(-4px); /* Lift effect */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Enhanced shadow */
        }
        
        /* Checklist section animations */
        .checklist-section {
            display: none; /* Hidden by default */
            opacity: 0;
            transform: translateY(30px) scale(0.95); /* Initial state for animation */
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1); /* Smooth animation */
        }
        
        .checklist-section.active {
            display: block; /* Show when active */
            opacity: 1;
            transform: translateY(0) scale(1); /* Final state for animation */
        }
        
        /* OS selection card specific styles and animations */
        .os-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden; /* Hide overflow for the shimmer effect */
        }
        
        .os-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%; /* Start off-screen to the left */
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent); /* Shimmer gradient */
            transition: left 0.5s; /* Animate shimmer */
        }
        
        .os-card:hover::before {
            left: 100%; /* Move shimmer across the card on hover */
        }
        
        .os-card:hover {
            transform: translateY(-2px) scale(1.02); /* Slight lift and scale on hover */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); /* Deeper shadow on hover */
        }
        
        /* Custom checkbox animation */
        .checkbox-custom {
            position: relative;
            transform: scale(1.2); /* Slightly larger checkbox */
        }
        
        .checkbox-custom:checked {
            animation: checkmark 0.3s ease-in-out; /* Pop animation on check */
        }
        
        @keyframes checkmark {
            0% { transform: scale(1.2); }
            50% { transform: scale(1.4); } /* Briefly larger */
            100% { transform: scale(1.2); }
        }
        
        /* Gradient text for titles/icons */
        .gradient-text {
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text; /* Clip background to text shape */
            -webkit-text-fill-color: transparent; /* Make text transparent to show background */
            background-clip: text;
        }
        
        /* Floating animation for header icon */
        .floating-animation {
            animation: floating 6s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); } /* Move up and down */
        }
        
        /* Pulse shadow animation for header icon */
        .pulse-shadow {
            animation: pulse-shadow 2s infinite;
        }
        
        @keyframes pulse-shadow {
            0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); } /* Expand and contract shadow */
        }
        
        /* Progress bar styling */
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2); /* Gradient fill */
            height: 4px;
            border-radius: 2px;
            transition: width 0.5s ease; /* Smooth width transition */
        }

        /* OS selection container visibility */
        .os-selection-container {
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .os-selection-container.hidden-os {
            opacity: 0;
            transform: translateY(-20px);
            pointer-events: none; /* Disable interactions when hidden */
        }
        .os-selection-container.show-os {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        /* Completion message overlay */
        .completion-overlay {
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
            transition: opacity 0.5s ease-out;
        }
        .completion-message-card {
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">
    <div class="max-w-5xl mx-auto w-full">
        <div class="text-center mb-12 floating-animation">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-full shadow-2xl mb-6 pulse-shadow">
                <i class="fas fa-cogs text-3xl gradient-text"></i> </div>
            <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4 tracking-tight">
                Sistema de Configuração
            </h1>
            <p class="text-xl text-white opacity-90 font-light">
                Gerencie equipamentos com elegância e eficiência
            </p>
        </div>

        <div class="glass-effect rounded-3xl shadow-2xl overflow-hidden">
            <div class="h-1 bg-gray-200">
                <div id="progressBar" class="progress-bar w-0"></div>
            </div>
            
            <div class="p-8 sm:p-12">
                <div id="os_selection_container" class="mb-12 os-selection-container show-os">
                    <div class="flex items-center mb-8">
                        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mr-4">
                            <i class="fas fa-desktop text-white text-xl"></i> </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Sistema Operacional</h2>
                            <p class="text-gray-600">Selecione o sistema para configuração</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <label class="os-card cursor-pointer bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-2xl border-2 border-transparent hover:border-blue-300 transition-all">
                            <input type="radio" name="os_choice" value="linux" class="sr-only" onchange="handleOsSelection();">
                            <div class="text-center">
                                <i class="fab fa-linux text-4xl text-blue-600 mb-4"></i> <h3 class="text-xl font-semibold text-gray-800">Linux</h3>
                                <p class="text-gray-600 text-sm mt-2">Sistema robusto e seguro</p>
                            </div>
                        </label>
                        
                        <label class="os-card cursor-pointer bg-gradient-to-br from-green-50 to-emerald-100 p-6 rounded-2xl border-2 border-transparent hover:border-green-300 transition-all">
                            <input type="radio" name="os_choice" value="windows" class="sr-only" onchange="handleOsSelection();">
                            <div class="text-center">
                                <i class="fab fa-windows text-4xl text-green-600 mb-4"></i> <h3 class="text-xl font-semibold text-gray-800">Windows</h3>
                                <p class="text-gray-600 text-sm mt-2">Interface amigável</p>
                            </div>
                        </label>
                        
                        <label class="os-card cursor-pointer bg-gradient-to-br from-purple-50 to-pink-100 p-6 rounded-2xl border-2 border-transparent hover:border-purple-300 transition-all">
                            <input type="radio" name="os_choice" value="mac" class="sr-only" onchange="handleOsSelection();">
                            <div class="text-center">
                                <i class="fab fa-apple text-4xl text-purple-600 mb-4"></i> <h3 class="text-xl font-semibold text-gray-800">macOS</h3>
                                <p class="text-gray-600 text-sm mt-2">Design elegante</p>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="mb-12 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-8">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center mr-4">
                            <i class="fas fa-info-circle text-white text-xl"></i> </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Detalhes do Equipamento</h2>
                            <p class="text-gray-600">Informações essenciais para identificação</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label for="equipamento" class="block text-sm font-semibold text-gray-700 flex items-center">
                                <i class="fas fa-laptop mr-2 text-gray-500"></i>
                                Equipamento
                            </label>
                            <input type="text" id="equipamento" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-0 transition-colors bg-white shadow-sm" placeholder="Nome ou modelo do equipamento" oninput="updateProgress()">
                        </div>
                        
                        <div class="space-y-2">
                            <label for="tag_controle" class="block text-sm font-semibold text-gray-700 flex items-center">
                                <i class="fas fa-tag mr-2 text-gray-500"></i>
                                Tag de Controle
                            </label>
                            <input type="text" id="tag_controle" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-0 transition-colors bg-white shadow-sm" placeholder="Ex: GRN-001" oninput="updateProgress()">
                        </div>
                        
                        <div class="md:col-span-2 space-y-2">
                            <label for="anotacoes" class="block text-sm font-semibold text-gray-700 flex items-center">
                                <i class="fas fa-sticky-note mr-2 text-gray-500"></i>
                                Anotações
                            </label>
                            <textarea id="anotacoes" rows="4" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-0 transition-colors bg-white shadow-sm resize-none" placeholder="Adicione observações importantes aqui..."></textarea>
                        </div>
                    </div>
                </div>

                <div id="linux_checklist" class="checklist-section mb-12">
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 border border-blue-200">
                        <div class="flex items-center mb-8">
                            <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4">
                                <i class="fab fa-linux text-white text-xl"></i> </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Configuração Linux</h2>
                                <p class="text-gray-600">Checklist completo para sistemas Linux</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Formatação" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-hdd text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Formatação</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Criptografia" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-shield-alt text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Criptografia</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Senhas" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-key text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Senhas</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Rodar script da L2TP" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-network-wired text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Script L2TP</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Rodar script de Criptografia" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-lock text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Script Criptografia</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Rodar Script de Instalação da JumpCloud" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-cloud text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">JumpCloud</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Instalar aplicativos (Google …)" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-download text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Aplicativos</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Vincular Usuário" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-user-plus text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Vincular Usuário</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer md:col-span-2">
                                <input type="checkbox" value="Cadastrar o equipamento" class="checkbox-custom form-checkbox h-5 w-5 text-blue-600 rounded focus:ring-blue-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-clipboard-list text-blue-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Cadastrar Equipamento</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div id="windows_checklist" class="checklist-section mb-12">
                    <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 border border-green-200">
                        <div class="flex items-center mb-8">
                            <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-4">
                                <i class="fab fa-windows text-white text-xl"></i> </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Configuração Windows</h2>
                                <p class="text-gray-600">Checklist completo para sistemas Windows</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer md:col-span-2">
                                <input type="checkbox" value="Iniciar com a conta dev@greenn.com.br" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-user-circle text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Iniciar com conta dev@greenn.com.br</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer md:col-span-2">
                                <input type="checkbox" value="Fazer toda a configuração do Windows que ele pede" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-cog text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Configuração completa do Windows</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Instalar Aplicativos (Google …)" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-download text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Aplicativos</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Acessar ao Portal de Administrador JumpCloud e instalar a Jump" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-cloud text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">JumpCloud</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Vincular o usuário" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-user-plus text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Vincular Usuário</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Cadastrar equipamento" class="checkbox-custom form-checkbox h-5 w-5 text-green-600 rounded focus:ring-green-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-clipboard-list text-green-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Cadastrar Equipamento</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div id="mac_checklist" class="checklist-section mb-12">
                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-8 border border-purple-200">
                        <div class="flex items-center mb-8">
                            <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4">
                                <i class="fab fa-apple text-white text-xl"></i> </div>
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800">Configuração macOS</h2>
                                <p class="text-gray-600">Checklist completo para sistemas macOS</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Formatação" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-hdd text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Formatação</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Criptografia (FileVault)" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-shield-alt text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">FileVault</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Senhas" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-key text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Senhas</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Configuração de iCloud" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-cloud text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">iCloud</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Instalar aplicativos (Google Chrome, Slack, etc.)" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-download text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Aplicativos</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Rodar Script de Instalação da JumpCloud" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-terminal text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">JumpCloud</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Vincular Usuário" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-user-plus text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Vincular Usuário</span>
                                </div>
                            </label>
                            
                            <label class="flex items-center p-4 bg-white rounded-xl shadow-sm card-hover cursor-pointer">
                                <input type="checkbox" value="Cadastrar o equipamento" class="checkbox-custom form-checkbox h-5 w-5 text-purple-600 rounded focus:ring-purple-500 mr-4" onchange="updateProgress()">
                                <div class="flex items-center">
                                    <i class="fas fa-clipboard-list text-purple-500 mr-3"></i>
                                    <span class="text-gray-700 font-medium">Cadastrar Equipamento</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="saveCertificate()" class="group relative px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-300">
                        <span class="flex items-center z-10 relative"> <i class="fas fa-save mr-3 text-xl"></i>
                            Salvar Certificado de Conclusão
                        </span>
                        <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </button>
                </div>

                <div id="message_box" class="hidden mt-8 p-6 rounded-2xl text-center font-medium shadow-lg transition-all duration-300" role="alert">
                    <div class="flex items-center justify-center">
                        <i id="message_icon" class="text-2xl mr-3"></i>
                        <span id="message_text"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="completion_message_overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-500 ease-out">
        <div class="bg-white p-10 rounded-2xl shadow-2xl text-center max-w-md mx-auto transform scale-95 completion-message-card">
            <i class="fas fa-check-circle text-6xl text-green-500 mb-6 animate-bounce"></i>
            <h3 class="text-3xl font-bold text-gray-800 mb-4">Configuração Concluída!</h3>
            <p class="text-lg text-gray-600 mb-6">O certificado de conclusão foi salvo com sucesso.</p>
            <button onclick="hideCompletionMessage()" class="px-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors duration-300">
                Fechar
            </button>
        </div>
    </div>

    <script>
        // Function to update progress bar based on filled fields and checked items
        function updateProgress() {
            const equipamento = document.getElementById('equipamento').value;
            const tagControle = document.getElementById('tag_controle').value;
            const osChoice = document.querySelector('input[name="os_choice"]:checked');
            
            let progress = 0;
            let totalSteps = 4; // OS choice, Equipment, Tag, Checklist completion

            // Step 1: OS Choice
            if (osChoice) {
                progress += 1;
            }

            // Step 2: Equipment Details
            if (equipamento) {
                progress += 1;
            }
            if (tagControle) {
                progress += 1;
            }
            
            // Step 3: Checklist Completion (at least one item checked)
            if (osChoice) {
                const checklistSectionId = `${osChoice.value}_checklist`;
                const checkedItems = document.querySelectorAll(`#${checklistSectionId} input[type="checkbox"]:checked`);
                if (checkedItems.length > 0) {
                    progress += 1;
                }
            }
            
            // Calculate percentage
            const percentage = (progress / totalSteps) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
        }

        // Function to display or hide small message box (for errors/success notifications)
        function showMessageBox(message, type) {
            const msgBox = document.getElementById('message_box');
            const msgIcon = document.getElementById('message_icon');
            const msgText = document.getElementById('message_text');
            
            msgText.textContent = message;
            // Reset classes and apply base animation
            msgBox.className = 'mt-8 p-6 rounded-2xl text-center font-medium shadow-lg transition-all duration-300 transform scale-95';

            if (type === 'success') {
                msgBox.classList.add('bg-gradient-to-r', 'from-green-100', 'to-emerald-100', 'text-green-800', 'border-2', 'border-green-300');
                msgIcon.className = 'fas fa-check-circle text-2xl mr-3 text-green-600';
            } else if (type === 'error') {
                msgBox.classList.add('bg-gradient-to-r', 'from-red-100', 'to-pink-100', 'text-red-800', 'border-2', 'border-red-300');
                msgIcon.className = 'fas fa-exclamation-triangle text-2xl mr-3 text-red-600'; // Warning icon for error
            } else {
                msgBox.classList.add('bg-gradient-to-r', 'from-gray-100', 'to-gray-200', 'text-gray-800', 'border-2', 'border-gray-300');
                msgIcon.className = 'fas fa-info-circle text-2xl mr-3 text-gray-600';
            }
            msgBox.classList.remove('hidden');
            // Animate in
            setTimeout(() => {
                msgBox.classList.remove('scale-95');
                msgBox.classList.add('scale-100');
            }, 10);
            
            setTimeout(() => {
                msgBox.classList.add('hidden');
                msgBox.classList.remove('scale-100');
                msgBox.classList.add('scale-95'); // Animate out
            }, 5000); // Hide after 5 seconds
        }

        // Function to handle OS selection: hides OS buttons and shows checklist
        function handleOsSelection() {
            const osSelectionContainer = document.getElementById('os_selection_container');
            osSelectionContainer.classList.remove('show-os');
            osSelectionContainer.classList.add('hidden-os'); // Start hiding animation

            // After transition, fully hide
            setTimeout(() => {
                osSelectionContainer.classList.add('hidden');
            }, 500); // Match CSS transition duration

            showChecklist(); // Show the selected checklist
            updateProgress(); // Update progress bar
        }

        // Function to show the relevant checklist based on OS selection
        function showChecklist() {
            const checklists = document.querySelectorAll('.checklist-section');
            const osChoice = document.querySelector('input[name="os_choice"]:checked');

            // Hide all checklists initially with animation
            checklists.forEach(list => {
                list.classList.remove('active');
                // Uncheck all checkboxes when switching OS
                list.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
            });

            // Show the selected checklist with animation
            if (osChoice) {
                const selectedChecklistId = `${osChoice.value}_checklist`;
                const selectedChecklist = document.getElementById(selectedChecklistId);
                if (selectedChecklist) {
                    selectedChecklist.classList.add('active');
                }
            }
            updateProgress(); // Update progress after showing checklist
        }

        // Function to hide the large completion message overlay
        function hideCompletionMessage() {
            const completionMessageOverlay = document.getElementById('completion_message_overlay');
            const completionMessageCard = completionMessageOverlay.querySelector('.completion-message-card');

            completionMessageOverlay.classList.remove('opacity-100');
            completionMessageOverlay.classList.add('opacity-0');
            completionMessageCard.classList.remove('scale-100');
            completionMessageCard.classList.add('scale-95');

            setTimeout(() => {
                completionMessageOverlay.classList.add('hidden');
            }, 500); // Match transition duration
        }

        // Function to save the certificate
        function saveCertificate() {
            const equipamento = document.getElementById('equipamento').value;
            const tagControle = document.getElementById('tag_controle').value;
            const anotacoes = document.getElementById('anotacoes').value;
            const osChoice = document.querySelector('input[name="os_choice"]:checked');

            if (!equipamento || !tagControle) {
                showMessageBox('Por favor, preencha os campos "Equipamento" e "Tag de Controle".', 'error');
                return;
            }

            if (!osChoice) {
                showMessageBox('Por favor, selecione um Sistema Operacional.', 'error');
                return;
            }

            const selectedOS = osChoice.value === 'linux' ? 'Linux' : (osChoice.value === 'windows' ? 'Windows' : 'macOS');
            let checklistItems = [];
            let checklistSectionId = `${osChoice.value}_checklist`;
            const checkboxes = document.querySelectorAll(`#${checklistSectionId} input[type="checkbox"]:checked`);

            checkboxes.forEach(checkbox => {
                checklistItems.push(checkbox.value);
            });

            // Construct the certificate content
            let certificateContent = `
CERTIFICADO DE CONCLUSÃO DE CONFIGURAÇÃO DE EQUIPAMENTO

Data de Conclusão: ${new Date().toLocaleDateString('pt-BR')}

---

Detalhes do Equipamento:
  Equipamento: ${equipamento}
  Tag de Controle: ${tagControle}
  Sistema Operacional: ${selectedOS}

---

Anotações:
${anotacoes || 'Nenhuma anotação adicional.'}

---

Checklist de Tarefas Concluídas (${selectedOS}):
${checklistItems.length > 0 ? checklistItems.map(item => `  - ${item}`).join('\n') : '  Nenhuma tarefa marcada como concluída.'}

---

Este certificado atesta a conclusão da configuração do equipamento conforme as etapas indicadas.
`;

            // Create a Blob from the content
            const blob = new Blob([certificateContent], { type: 'text/plain;charset=utf-8' });

            // Create a temporary URL for the Blob
            const url = URL.createObjectURL(blob);

            // Create a temporary link element
            const a = document.createElement('a');
            a.href = url;
            a.download = `Certificado_Configuracao_${equipamento.replace(/\s/g, '_')}_${selectedOS}.txt`;

            // Programmatically click the link to trigger the download
            document.body.appendChild(a);
            a.click();

            // Clean up the temporary URL and link
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showMessageBox('Certificado salvo com sucesso!', 'success');

            // Show the large completion message overlay
            const completionMessageOverlay = document.getElementById('completion_message_overlay');
            const completionMessageCard = completionMessageOverlay.querySelector('.completion-message-card');
            completionMessageOverlay.classList.remove('hidden');
            setTimeout(() => {
                completionMessageOverlay.classList.remove('opacity-0');
                completionMessageOverlay.classList.add('opacity-100');
                completionMessageCard.classList.remove('scale-95');
                completionMessageCard.classList.add('scale-100');
            }, 10);

            // Reset the form for a new configuration
            const osSelectionContainer = document.getElementById('os_selection_container');
            osSelectionContainer.classList.remove('hidden', 'hidden-os'); // Make visible first
            osSelectionContainer.classList.add('show-os');

            // Uncheck OS radio buttons
            document.querySelectorAll('input[name="os_choice"]').forEach(radio => radio.checked = false);
            
            // Clear equipment details
            document.getElementById('equipamento').value = '';
            document.getElementById('tag_controle').value = '';
            document.getElementById('anotacoes').value = '';

            // Hide all checklists and reset progress
            showChecklist(); // This will also uncheck all checklist items
            updateProgress(); // Reset progress bar to 0
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            showChecklist(); // Hide checklists initially
            updateProgress(); // Initialize progress bar
        });
    </script>
</body>
</html>
